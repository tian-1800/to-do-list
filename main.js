(()=>{"use strict";let e;const t=t=>{let i,a=t.parentElement,l=document.createElement("form");l.id="temporary-form",l.style.display="block",e.big?(i=document.createElement("textarea"),i.cols="50",i.rows="5",console.log("big")):(i=document.createElement("input"),i.style.display="inline",i.style.width="150px"),i.value=t.textContent;let o=document.createElement("button");o.type="button",o.innerHTML='<i class="material-icons">done</i>',o.style.opacity="100%",((t,n)=>{t.addEventListener("click",(()=>{let t=n.value;""!=t&&(e.obj.textContent=t,e.item[e.attr]=t,G(!0),e.obj.displayed&&(z(e.item),console.log("update display")))}))})(o,i);let s=document.createElement("button");s.button="button",s.innerHTML='<i class="material-icons">clear</i>',(e=>{e.addEventListener("click",(()=>{n()}))})(s),l.append(i,o,s),a.appendChild(l)},n=()=>{document.getElementById("temporary-form").remove(),e.obj.style.display="initial",e.toggler.style.display="initial"},i=(n,i,a,l,o)=>{i.item=a,i.editable||(i.editable=!0,((n,i,a,l,o)=>{n.addEventListener("click",(()=>{a=i.item,e={toggler:n,obj:i,item:a,attr:l,big:o},n.style.display="none",i.style.display="none",console.log(a),t(i)}))})(n,i,a,l,o))};function a(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function l(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}var o=36e5,s={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},r=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,d=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,c=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(e,t){l(1,arguments);var n=t||{},i=null==n.additionalDigits?2:a(n.additionalDigits);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var o,s=m(e);if(s.date){var r=p(s.date,i);o=g(r.restDateString,r.year)}if(isNaN(o)||!o)return new Date(NaN);var d,c=o.getTime(),u=0;if(s.time&&(u=b(s.time),isNaN(u)||null===u))return new Date(NaN);if(!s.timezone){var y=new Date(c+u),f=new Date(0);return f.setFullYear(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()),f.setHours(y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()),f}return d=E(s.timezone),isNaN(d)?new Date(NaN):new Date(c+u+d)}function m(e){var t,n={},i=e.split(s.dateTimeDelimiter);if(i.length>2)return n;if(/:/.test(i[0])?(n.date=null,t=i[0]):(n.date=i[0],t=i[1],s.timeZoneDelimiter.test(n.date)&&(n.date=e.split(s.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var a=s.timezone.exec(t);a?(n.time=t.replace(a[1],""),n.timezone=a[1]):n.time=t}return n}function p(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=e.match(n);if(!i)return{year:null};var a=i[1]&&parseInt(i[1]),l=i[2]&&parseInt(i[2]);return{year:null==l?a:100*l,restDateString:e.slice((i[1]||i[2]).length)}}function g(e,t){if(null===t)return null;var n=e.match(r);if(!n)return null;var i=!!n[4],a=y(n[1]),l=y(n[2])-1,o=y(n[3]),s=y(n[4]),d=y(n[5])-1;if(i)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,d)?function(e,t,n){var i=new Date(0);i.setUTCFullYear(e,0,4);var a=7*(t-1)+n+1-(i.getUTCDay()||7);return i.setUTCDate(i.getUTCDate()+a),i}(t,s,d):new Date(NaN);var c=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(k[t]||(v(e)?29:28))}(t,l,o)&&function(e,t){return t>=1&&t<=(v(e)?366:365)}(t,a)?(c.setUTCFullYear(t,l,Math.max(a,o)),c):new Date(NaN)}function y(e){return e?parseInt(e):1}function b(e){var t=e.match(d);if(!t)return null;var n=f(t[1]),i=f(t[2]),a=f(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,i,a)?n*o+6e4*i+1e3*a:NaN}function f(e){return e&&parseFloat(e.replace(",","."))||0}function E(e){if("Z"===e)return 0;var t=e.match(c);if(!t)return 0;var n="+"===t[1]?-1:1,i=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,a)?n*(i*o+6e4*a):NaN}var k=[31,null,31,30,31,30,31,31,30,31,30,31];function v(e){return e%400==0||e%4==0&&e%100}let D;const h=e=>{e.addEventListener("click",(()=>{B()}))},I=e=>{let t=e.parentElement,n=document.createElement("form");n.id="temporary-form",n.style.display="block";const i=w("start"),a=w("finish");let l=document.createElement("button");l.type="button",l.innerHTML='<i class="material-icons">done</i>',((e,t,n)=>{e.addEventListener("click",(()=>{let e=t.firstElementChild.value,i=n.firstElementChild.value;console.log(e,i),""!=e&""!=i&&(D.item.startDate=e,D.item.dueDate=i,console.log("global item is "+D.item),D.obj.textContent=C(D.obj,e,i),G(),B())}))})(l,i,a);let o=document.createElement("button");o.button="button",o.innerHTML='<i class="material-icons">clear</i>',h(o),n.append(i,a,l,o),t.appendChild(n)},j=e=>{let t=e.parentElement,n=document.createElement("form");n.id="temporary-form",n.style.display="block";const i=w("due");let a=document.createElement("button");a.type="button",a.innerHTML='<i class="material-icons">done</i>',((e,t)=>{e.addEventListener("click",(()=>{let e=t.firstElementChild.value;""!=e&&(D.item.dueDate=e,D.obj.textContent=e,G(),B())}))})(a,i);let l=document.createElement("button");l.button="button",l.innerHTML='<i class="material-icons">clear</i>',h(l),n.append(i,a,l),t.appendChild(n)},w=e=>{let t=document.createElement("label");t.for=e,t.textContent=`${e} date: `,t.style.display="block";let n=document.createElement("input");n.type="date",n.id=e;const i={start:D.item.startDate,finish:D.item.dueDate,due:D.item.dueDate};return n.valueAsDate=u(i[e]),console.log("valueDate is"+n.valueAsDate),n.valueAsDate||(n.valueAsDate=new Date),t.appendChild(n),t},C=(e,t,n)=>(new Date,`${t} until ${n}`),B=()=>{document.getElementById("temporary-form").remove(),console.log("global.obj is "+D.obj),D.obj.style.display="initial"},T=(e,t,n)=>{e.editable?"project"==t&&(D={obj:e,item:n}):(e.editable=!0,"project"==t?((e,t)=>{D={obj:e,item:t},e.addEventListener("click",(()=>{I(e),e.style.display="none"}))})(e,n):((e,t)=>{e.addEventListener("click",(()=>{D={obj:e,item:t},j(e),e.style.display="none"}))})(e,n))},L=(e,t,n)=>{G(!0)},x=(e,t,n,a)=>{let l=document.createElement("span");l.innerHTML=e.innerHTML,l.index=e.index,e.innerHTML="";let o=document.createElement("i");o.classList="material-icons appearing-icon",o.textContent="edit";let s=document.createElement("i");s.classList="appearing-icon material-icons",s.textContent="delete",e.append(l,o,s),i(o,l,t,n,!1),((e,t,n)=>{((e,t,n)=>{e.addEventListener("click",(()=>{t.splice(n.index,1),L(e,t,n)}))})(e,t,n)})(s,a,l)};function N(e){l(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function M(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function H(e){l(1,arguments);var t=N(e);return t.setHours(0,0,0,0),t}var S=864e5;function F(e,t){l(2,arguments);var n=H(e),i=H(t),a=n.getTime()-M(n),o=i.getTime()-M(i);return Math.round((a-o)/S)}function U(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function $(e,t){l(2,arguments);var n=N(e),i=N(t),a=U(n,i),o=Math.abs(F(n,i));n.setDate(n.getDate()-a*o);var s=U(n,i)===-a,r=a*(o-s);return 0===r?0:r}class O{constructor(e,t){this.title=e,this.dueDate=t,this.priority=!1}}const Y={plus:e=>{e.addEventListener("click",(()=>{Z.newForm(),e.style.display="none",document.getElementById("task-button-description").style.display="none"}))},submit:e=>{e.addEventListener("click",(()=>{Z.newTask(),document.getElementById("new-task-form").style.display="none",document.getElementById("add-task-button").style.display="block",document.getElementById("task-button-description").style.display="block"}))},cancel:e=>{e.addEventListener("click",(()=>{document.getElementById("new-task-form").style.display="none",document.getElementById("add-task-button").style.display="block",document.getElementById("task-button-description").style.display="block"}))}},Z=(()=>{let e;return{index:e,button:(t,n)=>{e=n;let i=document.getElementById("add-task-button");i.style.display="block",document.getElementById("task-button-description").style.display="block",i.project=t,console.log(t)},initButton:()=>{let e=document.getElementById("add-task-button"),t=document.getElementById("new-task-submit"),n=document.getElementById("new-task-cancel");Y.submit(t),Y.cancel(n),Y.plus(e)},newForm:()=>{document.getElementById("new-task-form").style.display="block"},tasksContainer:e=>{const t=document.getElementById("task-container");t.innerHTML="";const n=document.createElement("ul");n.id="task-list",((e,t)=>{for(let n of e.taskList){let i=document.createElement("li");i.textContent=n.title,i.index=e.taskList.indexOf(n);let a=document.createElement("span");a.textContent=n.dueDate,a.className="task-date",T(a,"task",n),x(i,n,"title",e.taskList),i.appendChild(a),t.appendChild(i);let l=$(u(n.dueDate),new Date);console.log(l)}})(e,n),t.appendChild(n)},newTask:()=>{let e=document.getElementById("add-task-button").project;if(!e)return;let t=document.getElementById("task-title").value,n=document.getElementById("due-date").value;if(""!=t){let i=new O(t,n,!1);document.getElementById("task-title").value="",e.taskList.push(i),G(),z(e)}},taskHeader:e=>{let t=document.getElementById("task-header"),n=document.getElementById("task-header-text"),a=document.getElementById("project-description"),l=document.getElementById("project-desc-edit"),o=document.getElementById("project-timetable");""==a.textContent&&(a.textContent="Click to enter description"),""==e.startDate?o.textContent="click to edit timetable":o.textContent=`${e.startDate} until ${e.dueDate}`,t.style.display="block",a.style.display="block",n.textContent=e.title,a.textContent=e.description,i(l,a,e,"description",!0),T(o,"project",e)}}})(),z=(e,t)=>{Z.taskHeader(e),Z.tasksContainer(e),Z.button(e,t)},J=Z.initButton;class A{constructor(e){this.title=e,this.description="lorem ipsum domet ngalor ngidul arep nangendi ora keturutan",this.startDate="",this.dueDate="",this.taskList=[]}addTask=e=>this.taskList.push(e);deleteTask=e=>{this.task.splice(this.indexOf(e),1)};static list;static activeIndex=0;static lastDeleted;static name="project"}const P=e=>{e.addEventListener("click",(()=>{A.activeIndex=e.parentElement.index,W.initDisplay()}))},R={plus:e=>{e.addEventListener("click",(()=>{W.newForm(),e.style.display="none"}))},submit:e=>{e.addEventListener("click",(()=>{console.log("submit"),""!=document.getElementById("input-project-title").value&&(W.newProject(),document.getElementById("new-project-form").style.display="none",document.getElementById("add-project-button").style.display="block")}))},cancel:e=>{e.addEventListener("click",(()=>{console.log("cancel"),document.getElementById("new-project-form").style.display="none",document.getElementById("add-project-button").style.display="block"}))}},W=(()=>{const e=document.getElementById("project-list"),t=t=>{A.list=t,e.innerHTML="";for(let n of t){let i=document.createElement("li");i.className="project-item",i.textContent=n.title,i.project=n,i.index=t.indexOf(n),x(i,n,"title",t),P(i.firstChild),e.appendChild(i)}n()},n=()=>{if(A.list.length>0){A.list.length<A.activeIndex+1&&(A.activeIndex=0),z(A.list[A.activeIndex],A.activeIndex);let e=document.getElementsByClassName("project-item");for(let t of e)t.classList.remove("selected"),t.displayed=!1;let t=e[A.activeIndex];t.classList.add("selected"),t.displayed=!0}},i=e=>{sessionStorage.setItem("projects",JSON.stringify(A.list)),e&&t(A.list)};return{projectList:t,addButton:()=>{let e=document.getElementById("add-project-button"),t=document.getElementById("new-project-submit"),n=document.getElementById("new-project-cancel");R.plus(e),R.submit(t),R.cancel(n),J()},newForm:()=>{document.getElementById("new-project-form").style.display="block"},newProject:()=>{let e=document.getElementById("input-project-title").value,n=new A(e);console.log(e),A.list.push(n),document.getElementById("input-project-title").value="",i(),t(A.list)},save:i,initDisplay:n}})(),q=W.projectList,V=W.addButton,G=W.save;let K=[];K=JSON.parse(sessionStorage.getItem("projects"));const Q=new A("Vacation To Rome");Q.description="We'll go from June 14-22 and stop through London on the way back to visit Jane and Paolo. Monti looks like a great place to stay. Maybe do a night out in Trastevere.",K||(K=[Q],sessionStorage.setItem("projects",JSON.stringify(K))),V(),q(K)})();