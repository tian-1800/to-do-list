(()=>{"use strict";let e;const t=t=>{let a,l=t.parentElement,o=document.createElement("form");o.id="temporary-form",o.style.display="block",e.big?(a=document.createElement("textarea"),a.cols="50",a.rows="5",console.log("big")):(a=document.createElement("input"),a.style.display="inline",a.style.width="150px"),a.value=t.textContent;let i=document.createElement("button");i.type="button",i.innerHTML='<i class="material-icons">done</i>',i.style.opacity="100%",((t,a)=>{t.addEventListener("click",(()=>{let t=a.value;""!=t&&(e.obj.textContent=t,e.item[e.attr]=t,q()),n()}))})(i,a);let s=document.createElement("button");s.button="button",s.innerHTML='<i class="material-icons">clear</i>',(e=>{e.addEventListener("click",(()=>{n()}))})(s),o.append(a,i,s),l.appendChild(o)},n=()=>{document.getElementById("temporary-form").remove(),e.obj.style.display="initial",e.toggler.style.display="initial"},a=(n,a,l,o,i)=>{a.item=l,a.editable||(a.editable=!0,((n,a,l,o,i)=>{n.addEventListener("click",(()=>{l=a.item,e={toggler:n,obj:a,item:l,attr:o,big:i},n.style.display="none",a.style.display="none",console.log(l),t(a)}))})(n,a,l,o,i))};function l(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function o(e){l(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function i(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function s(e){l(1,arguments);var t=o(e);return t.setHours(0,0,0,0),t}var r=864e5;function d(e,t){l(2,arguments);var n=s(e),a=s(t),o=n.getTime()-i(n),d=a.getTime()-i(a);return Math.round((o-d)/r)}function c(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function u(e,t){l(2,arguments);var n=o(e),a=o(t),i=c(n,a),s=Math.abs(d(n,a));n.setDate(n.getDate()-i*s);var r=c(n,a)===-i,u=i*(s-r);return 0===u?0:u}function m(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var p=36e5,y={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},g=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,b=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,f=/^([+-])(\d{2})(?::?(\d{2}))?$/;function E(e,t){l(1,arguments);var n=t||{},a=null==n.additionalDigits?2:m(n.additionalDigits);if(2!==a&&1!==a&&0!==a)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var o,i=k(e);if(i.date){var s=v(i.date,a);o=D(s.restDateString,s.year)}if(isNaN(o)||!o)return new Date(NaN);var r,d=o.getTime(),c=0;if(i.time&&(c=h(i.time),isNaN(c)||null===c))return new Date(NaN);if(!i.timezone){var u=new Date(d+c),p=new Date(0);return p.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),p.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),p}return r=j(i.timezone),isNaN(r)?new Date(NaN):new Date(d+c+r)}function k(e){var t,n={},a=e.split(y.dateTimeDelimiter);if(a.length>2)return n;if(/:/.test(a[0])?(n.date=null,t=a[0]):(n.date=a[0],t=a[1],y.timeZoneDelimiter.test(n.date)&&(n.date=e.split(y.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var l=y.timezone.exec(t);l?(n.time=t.replace(l[1],""),n.timezone=l[1]):n.time=t}return n}function v(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(n);if(!a)return{year:null};var l=a[1]&&parseInt(a[1]),o=a[2]&&parseInt(a[2]);return{year:null==o?l:100*o,restDateString:e.slice((a[1]||a[2]).length)}}function D(e,t){if(null===t)return null;var n=e.match(g);if(!n)return null;var a=!!n[4],l=w(n[1]),o=w(n[2])-1,i=w(n[3]),s=w(n[4]),r=w(n[5])-1;if(a)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,r)?function(e,t,n){var a=new Date(0);a.setUTCFullYear(e,0,4);var l=7*(t-1)+n+1-(a.getUTCDay()||7);return a.setUTCDate(a.getUTCDate()+l),a}(t,s,r):new Date(NaN);var d=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(B[t]||(C(e)?29:28))}(t,o,i)&&function(e,t){return t>=1&&t<=(C(e)?366:365)}(t,l)?(d.setUTCFullYear(t,o,Math.max(l,i)),d):new Date(NaN)}function w(e){return e?parseInt(e):1}function h(e){var t=e.match(b);if(!t)return null;var n=I(t[1]),a=I(t[2]),l=I(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,a,l)?n*p+6e4*a+1e3*l:NaN}function I(e){return e&&parseFloat(e.replace(",","."))||0}function j(e){if("Z"===e)return 0;var t=e.match(f);if(!t)return 0;var n="+"===t[1]?-1:1,a=parseInt(t[2]),l=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,l)?n*(a*p+6e4*l):NaN}var B=[31,null,31,30,31,30,31,31,30,31,30,31];function C(e){return e%400==0||e%4==0&&e%100}let T;const N=e=>{let t=e.parentElement,n=document.createElement("form");n.id="temporary-form",n.style.display="block";const a=L(),l=x();let o=document.createElement("button");o.type="button",o.innerHTML='<i class="material-icons">done</i>',((e,t,n)=>{e.addEventListener("click",(()=>{t.value&&n.value&&(T.item.startDate=t.value,T.item.dueDate=n.value,T.obj.textContent=M(T.obj,t,n),q(),S())}))})(o,a,l);let i=document.createElement("button");i.button="button",i.innerHTML='<i class="material-icons">clear</i>',(e=>{e.addEventListener("click",(()=>{S()}))})(i),n.append(a,l,o,i),t.appendChild(n)},L=()=>{let e=document.createElement("input");return e.type="date",""==T.item.startDate?e.valueAsDate=new Date:e.valueAsDate=E(T.item.startDate),e},x=()=>{let e=document.createElement("input");return e.type="date",""==T.item.dueDate?e.valueAsDate=new Date:e.valueAsDate=E(T.item.dueDate),e},M=(e,t,n)=>{const a=new Date;return u(a,t),u(a,n),`${t.value} until ${n.value}`},S=()=>{document.getElementById("temporary-form").remove(),T.obj.style.display="block"};class F{constructor(e,t,n){this.title=e,this.description=t,this.dueDate=n,this.priority=!1}}const H=(e,t)=>{for(let n of e.taskList){let e=document.createElement("li");e.textContent=n.title;let a=document.createElement("p");a.classList.add("task-description"),a.textContent=n.description,a.style.display="none",e.appendChild(a),e.addEventListener("click",(()=>{"none"==a.style.display?a.style.display="block":a.style.display="none"})),t.appendChild(e);let l=u(E(n.dueDate),new Date);console.log(l)}},U={plus:e=>{e.addEventListener("click",(()=>{Y.newForm(),e.style.display="none",document.getElementById("task-button-description").style.display="none"}))},submit:e=>{e.addEventListener("click",(()=>{Y.newTask(),document.getElementById("new-task-form").style.display="none",document.getElementById("add-task-button").style.display="block",document.getElementById("task-button-description").style.display="block"}))},cancel:e=>{e.addEventListener("click",(()=>{document.getElementById("new-task-form").style.display="none",document.getElementById("add-task-button").style.display="block",document.getElementById("task-button-description").style.display="block"}))}},Y=(()=>{let e;return{index:e,button:(t,n)=>{e=n;let a=document.getElementById("add-task-button");a.style.display="block",document.getElementById("task-button-description").style.display="block",a.project=t,console.log(t)},initButton:()=>{let e=document.getElementById("add-task-button"),t=document.getElementById("new-task-submit"),n=document.getElementById("new-task-cancel");U.submit(t),U.cancel(n),U.plus(e)},newForm:()=>{document.getElementById("new-task-form").style.display="block"},taskWindow:e=>{const t=document.getElementById("task-container");t.innerHTML="";const n=document.createElement("ul");n.id="task-list",H(e,n),t.appendChild(n)},newTask:()=>{let e=document.getElementById("add-task-button").project;if(!e)return;let t=document.getElementById("task-title").value,n=document.getElementById("task-desc").value,a=document.getElementById("due-date").value,l=new F(t,n,a,!1);e.taskList.push(l),q(),$(e)},taskHeader:e=>{let t=document.getElementById("task-header"),n=document.getElementById("task-header-text"),l=document.getElementById("project-description"),o=document.getElementById("project-desc-edit"),i=document.getElementById("project-timetable");var s,r;""==l.textContent&&(l.textContent="Click to enter description"),""==e.startDate?i.textContent="click to edit timetable":i.textContent=`${e.startDate} until ${e.dueDate}`,t.style.display="block",l.style.display="block",n.textContent=e.title,l.textContent=e.description,a(o,l,e,"description",!0),r=e,(s=i).editable?T={obj:s,item:r}:(s.editable=!0,(e=>{e.addEventListener("click",(()=>{N(e),e.style.display="none"}))})(s))}}})(),$=(e,t)=>{Y.taskHeader(e),Y.taskWindow(e),Y.button(e,t)},O=Y.initButton;class Z{constructor(e){this.title=e,this.description="lorem ipsum domet ngalor ngidul arep nangendi",this.startDate="",this.dueDate="",this.taskList=[]}addTask=e=>this.taskList.push(e);deleteTask=e=>{this.task.splice(this.indexOf(e),1)};static list}let z;const J=e=>{e.addEventListener("click",(()=>{$(e.project,e.projectIndex);let t=document.getElementsByClassName("project-item");for(let e of t)e.classList.remove("selected");e.classList.add("selected")}))},A={plus:e=>{e.addEventListener("click",(()=>{P.newForm(),e.style.display="none"}))},submit:e=>{e.addEventListener("click",(()=>{console.log("submit"),""!=document.getElementById("input-project-title").value&&(P.newProject(),document.getElementById("new-project-form").style.display="none",document.getElementById("add-project-button").style.display="block")}))},cancel:e=>{e.addEventListener("click",(()=>{console.log("cancel"),document.getElementById("new-project-form").style.display="none",document.getElementById("add-project-button").style.display="block"}))}},P=(()=>{const e=document.getElementById("project-list"),t=t=>{Z.list=t,e.innerHTML="";for(let n of t){let l=document.createElement("li"),o=document.createElement("span");o.className="project-item",o.textContent=n.title,o.project=n,o.projectIndex=t.indexOf(n),J(o);let i=document.createElement("i");i.classList="material-icons edit",i.textContent="edit";let s=document.createElement("i");s.classList="material-icons delete",s.textContent="delete",a(i,o,n,"title",!1),l.append(o,i,s),e.appendChild(l)}n()},n=()=>{Z.list.length>0&&($(Z.list[0]),z=0)},l=()=>{sessionStorage.setItem("projects",JSON.stringify(Z.list))};return{projectList:t,addButton:()=>{let e=document.getElementById("add-project-button"),t=document.getElementById("new-project-submit"),n=document.getElementById("new-project-cancel");A.plus(e),A.submit(t),A.cancel(n),O()},newForm:()=>{document.getElementById("new-project-form").style.display="block"},newProject:()=>{let e=document.getElementById("input-project-title").value,n=new Z(e);console.log(e),Z.list.push(n),l(),t(Z.list)},save:l}})(),W=P.projectList,R=P.addButton,q=P.save;let V=[];V=JSON.parse(sessionStorage.getItem("projects"));const G=new Z("Vacation To Rome");G.description="We'll go from June 14-22 and stop through London on the way back to visit Jane and Paolo. Monti looks like a great place to stay. Maybe do a night out in Trastevere.",V||(V=[G],sessionStorage.setItem("projects",JSON.stringify(V))),R(),W(V)})();